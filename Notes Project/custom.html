<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

	<form class="form-inline my-2 my-lg-0">
		<input id="searchTxt" class="form-control mr-sm-2" id="searchTxt" type="search" placeholder="Search" aria-label="Search">
		<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
	</form>
    <h1>Create Note</h1>
		<textarea class="note-text" id="addTxt"></textarea>
		<button class="note-btn" id="addBtn">Add Note</button>

	<h2>Your Notes</h2>	
	<div id="noteCardd">

	</div>

	<script type="text/javascript">
		showNotes();
		let addNoteBtn = document.getElementById('addBtn');
		addNoteBtn.addEventListener('click', function(){
			let addText = document.getElementById('addTxt');
			let notes = localStorage.getItem('notes');

			if(notes == null){
				noteObj = [];
			}else{
				noteObj = JSON.parse(notes);
			}
			noteObj.push(addText.value);
			localStorage.setItem('notes', JSON.stringify(noteObj));
			showNotes();
		});

		function showNotes(){
			let notes = localStorage.getItem('notes');

			if(notes == null){
				noteObj = [];
			}else{
				noteObj = JSON.parse(notes);
			}

			let html = "";
			noteObj.forEach(function(element, index){
				html += ` 
				<div class="note-card my-2 mx-2 card" style="width: 18rem;">
					<h2 class="card-title">Notes</h2>
					<p class="card-notes">${element}</p>
					<button class="card-delete" id="${index}" onclick="deleteNote(this.id)" >Delete Note</button>
				</div>`;
			});

			let noteCard = document.getElementById('noteCardd');
			if(noteObj.length != 0){
				noteCard.innerHTML = html;
			}else{
				noteCard.innerHTML = "there is nothing";
			}
		}

		function deleteNote(index){
			let notes = localStorage.getItem('notes');

			if(notes == null){
				noteObj = [];
			}else{
				noteObj = JSON.parse(notes);
			}

			noteObj.splice(index, 1);
			localStorage.setItem('notes', JSON.stringify(noteObj));
			showNotes();
		}

		let searchTxt = document.getElementById("searchTxt");
searchTxt.addEventListener('input', function(){
    let inputVal = searchTxt.value.toLowerCase();

    let noteCard = document.getElementsByClassName('note-card');


    Array.from(noteCard).forEach(function(element){
        let cardTxt = element.getElementsByTagName('p')[0].innerText;

        if(cardTxt.includes(inputVal)){
            element.style.display = "block";
        }else{
            element.style.display = "none";
        }
    })

});

</script>





</body>
</html>